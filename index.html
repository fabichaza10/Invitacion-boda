<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fabian & Maira</title>

<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;1,500;1,600&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
  font-family:'Cormorant Garamond',serif;
  background:#f4efe6;
  color:#4a443c;
  animation:fadeIn 1.2s ease;
}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}

.wrapper{
  max-width:420px;
  margin:auto;
  padding:46px 22px;
  text-align:center;
}

.hearts{position:fixed;inset:0;pointer-events:none}
.heart{
  position:absolute;
  font-size:22px;
  color:#c9a441;
  opacity:.22;
  animation:pulse 3.8s ease-in-out infinite;
}
@keyframes pulse{50%{transform:scale(1.25)}}

.photo-panel img{
  width:100%;
  border-radius:22px;
  margin:22px 0 30px;
}

input,button{
  width:100%;
  padding:14px;
  border-radius:28px;
  border:1px solid #cfc9bd;
  margin-top:14px;
  font-family:inherit;
}
button{background:#EDE8D0;border:none;cursor:pointer}
button.secondary{background:#e3dec6}

.divider{
  width:60%;
  height:1px;
  margin:34px auto;
  background:linear-gradient(to right,transparent,#cfc9bd,transparent);
}

iframe{
  width:100%;
  height:190px;
  border-radius:14px;
  border:none;
  margin-top:14px;
}

#invitacion{display:none}
#error{color:#8b2e2e;margin-top:12px}

#botonMusica{
  position:fixed;
  top:14px;
  right:14px;
  width:28px;
  height:28px;
  background:transparent;
  border:none;
  font-size:20px;
  color:#c9a441;
  opacity:.6;
  cursor:pointer;
}
#botonMusica.activo{opacity:1}
</style>
</head>

<body>

<audio id="musica" loop>
  <source src="Milo j - M.A.I (Letra).mp3" type="audio/mpeg">
</audio>

<button id="botonMusica" onclick="toggleMusica()">♫</button>

<div class="hearts">
  <span class="heart" style="top:10%;left:15%">♥</span>
  <span class="heart" style="top:30%;left:80%">♥</span>
  <span class="heart" style="top:55%;left:20%">♥</span>
  <span class="heart" style="top:75%;left:65%">♥</span>
</div>

<div class="wrapper" id="acceso">
  <h1>Invitación</h1>
  <p>Ingresá tu nombre para continuar</p>
  <input id="nombreInput" placeholder="Tu nombre">
  <button onclick="entrar()">Ingresar</button>
  <p id="error"></p>
</div>

<div class="wrapper" id="invitacion">
  <h1>Fabian & Maira</h1>

  <div class="photo-panel">
    <img src="foto.jpeg">
  </div>

  <p id="mensajePersonal"></p>

  <div class="divider"></div>

  <p>06 de marzo de 2026</p>
  <p>Delegación Registro Provincial de las Personas – Caseros</p>
  <iframe src="https://www.google.com/maps?q=Registro%20Provincial%20de%20las%20Personas%20Caseros&output=embed"></iframe>

  <div class="divider"></div>

  <p>21:30 · Quinta La Mabel</p>
  <iframe src="https://www.google.com/maps?q=Quinta%20La%20Mabel&output=embed"></iframe>

  <div class="divider"></div>

  <input id="cancion" placeholder="Canción que no puede faltar">

  <button onclick="enviar(true)">Confirmo asistencia</button>
  <button class="secondary" onclick="enviar(false)">No podré asistir</button>
</div>

<div id="mensajeEstado"></div>

<script>
const ENDPOINT="TU_ENDPOINT_AQUI";

const INVITADOS_RAW=[
"Myriam Chazarreta","Daiana Chazarreta","Jimena Chazarreta","Agustina Chazarreta"
];

const INVITADOS=INVITADOS_RAW.map(n=>normalizar(n));
let nombreActual="";
const musica=document.getElementById("musica");

function normalizar(t){
  return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim();
}

function capitalizar(t){
  return t.toLowerCase().split(" ").map(p=>p.charAt(0).toUpperCase()+p.slice(1)).join(" ");
}

function entrar(){
  const input=nombreInput.value.trim();
  const norm=normalizar(input);

  if(!INVITADOS.includes(norm)){
    error.textContent="Tu nombre no está en la lista";
    return;
  }

  nombreActual=capitalizar(input);
  mensajePersonal.textContent=`Hola ${nombreActual}, con mucha alegría queremos invitarte a compartir uno de los días más importantes de nuestras vidas.`;

  acceso.style.display="none";
  invitacion.style.display="block";

  musica.volume=0.25;
  musica.play().catch(()=>{});
}

function toggleMusica(){
  musica.paused ? musica.play() : musica.pause();
}

function enviar(asiste){
  const fd=new FormData();
  fd.append("nombre",nombreActual);
  fd.append("asistencia",asiste?"Sí":"No");
  fd.append("cancion",cancion.value);

  fetch(ENDPOINT,{method:"POST",body:fd});
}
</script>

</body>
</html>
